<div class="cart-widget w-30rem">
  <div class="text-900 text-xl pb-3 border-bottom-1 surface-border">Баланс</div>
  <ng-container *ngIf="balance$ | async as balance; else skeleton">
    <div class="grid mt-2">
      <div class="col-6 flex justify-content-start">
        <p-button label="Поповнити баланс" (onClick)="addFunds()"></p-button>
      </div>
      <div class="col-6 flex justify-content-end">
        <p-button
          label="Історія транзакцій"
          [routerLink]="['/', 'dashboard', 'transactions-history']"
        ></p-button>
      </div>
      <div class="col-12">
        <p-table
          class="block"
          [value]="balance.paymentTransactions | slice : -3"
          [rows]="3"
          [rowHover]="true"
        >
          <ng-template pTemplate="header">
            <tr>
              <th>Сума</th>
              <th>Статус</th>
              <th>Дата</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-transaction>
            <tr>
              <td>{{ transaction.amount | currency }}</td>
              <td>{{ transaction.status }}</td>
              <td>{{ transaction.createdAt | date : 'short' }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </ng-container>
</div>

<ng-template #skeleton>
  <div class="py-3 grid">
    <div class="col-6 pr-2 pb-0">
      <p-skeleton height="39px"></p-skeleton>
    </div>
    <div class="col-6 pl-2 pb-0">
      <p-skeleton height="39px"></p-skeleton>
    </div>
  </div>
  <div class="py-3">
    <p-skeleton height="6rem" width="30rem"></p-skeleton>
  </div>
</ng-template>
