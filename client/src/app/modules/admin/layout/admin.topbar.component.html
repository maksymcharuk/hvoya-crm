<div class="layout-topbar">
  <a class="layout-topbar-logo" routerLink="">
    <img src="assets/images/logo.svg" alt="logo" />
  </a>

  <button
    #menubutton
    class="p-link layout-menu-button layout-topbar-button"
    (click)="layoutService.onMenuToggle()"
  >
    <i class="pi pi-bars"></i>
  </button>

  <button
    #topbarmenubutton
    class="p-link layout-topbar-menu-button layout-topbar-button"
    (click)="layoutService.showProfileSidebar()"
  >
    <i class="pi pi-ellipsis-v"></i>
  </button>

  <div
    #topbarmenu
    class="layout-topbar-menu"
    [ngClass]="{
      'layout-topbar-menu-mobile-active':
        layoutService.state.profileSidebarVisible
    }"
  >
    <button
      class="p-link layout-topbar-button"
      (click)="notifications.toggle($event)"
    >
      <i
        class="pi pi-bell"
        *ngIf="uncheckedNotifications === '0'; else notificationBadge"
      ></i>
      <ng-template #notificationBadge>
        <i class="pi pi-bell" pBadge [value]="uncheckedNotifications"></i>
      </ng-template>

      <span class="topbar-button-text">Сповіщення</span>
    </button>
    <p-overlayPanel #overlayPanel #notifications>
      <ng-template pTemplate>
        <p-virtualScroller
          [value]="notificationsList"
          [style]="{ width: '200px' }"
          scrollHeight="200px"
          [itemSize]="50"
        >
          <ng-template pTemplate="item" let-notification>
            <a
              [href]="notification.url"
              class="flex align-items-center justify-content-between p-2 h-full cursor-pointer text-color"
              (click)="checkNotification(notification)"
            >
              <span>{{ notification.message }}</span>
              <i
                class="pi pi-circle-fill"
                [style]="
                  notification.checked ? 'color: #a6a6a6' : 'color: #f9d10a'
                "
              ></i>
            </a>
          </ng-template>
        </p-virtualScroller>
      </ng-template>
    </p-overlayPanel>

    <button
      class="p-link layout-topbar-button"
      (click)="account.toggle($event)"
    >
      <i class="pi pi-user"></i>
      <span class="topbar-button-text">Акаунт</span>
    </button>
    <p-overlayPanel #overlayPanel #account>
      <ng-template pTemplate>
        <div class="layout-menu-dropdown">
          <button
            pButton
            pRipple
            type="button"
            label="Акаунт"
            class="p-button-text"
            routerLink="account"
          ></button>
          <button
            pButton
            pRipple
            type="button"
            label="Вийти"
            class="p-button-text"
            (click)="logout()"
          ></button>
        </div>
      </ng-template>
    </p-overlayPanel>
  </div>
</div>
